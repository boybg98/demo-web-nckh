<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug - Test Access System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Courier New', monospace;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #2d2d2d;
            border: 1px solid #444;
            border-radius: 8px;
            padding: 20px;
        }
        
        h1 {
            color: #4ec9b0;
            margin-bottom: 20px;
            border-bottom: 2px solid #4ec9b0;
            padding-bottom: 10px;
        }
        
        h2 {
            color: #9cdcfe;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        .section {
            margin-bottom: 20px;
            padding: 15px;
            background: #1e1e1e;
            border-left: 3px solid #ce9178;
            border-radius: 4px;
        }
        
        button {
            padding: 10px 15px;
            margin: 5px;
            background: #007acc;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: background 0.3s ease;
        }
        
        button:hover {
            background: #005a9e;
        }
        
        button.danger {
            background: #f48771;
        }
        
        button.danger:hover {
            background: #d84a3a;
        }
        
        button.success {
            background: #4ec9b0;
        }
        
        button.success:hover {
            background: #36a893;
        }
        
        .output {
            background: #1e1e1e;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 15px;
            margin-top: 10px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background: #252526;
            border-radius: 4px;
        }
        
        .status-key {
            color: #9cdcfe;
        }
        
        .status-value {
            color: #ce9178;
        }
        
        .back-btn {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 20px;
            background: #6a9955;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            text-align: center;
        }
        
        .back-btn:hover {
            background: #558a3d;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        th, td {
            border: 1px solid #444;
            padding: 10px;
            text-align: left;
        }
        
        th {
            background: #252526;
            color: #4ec9b0;
        }
        
        tr:nth-child(even) {
            background: #252526;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ› Debug - Há»‡ Thá»‘ng Kiá»ƒm tra Truy cáº­p Test</h1>
        
        <div class="section">
            <h2>ğŸ“Š ThÃ´ng tin LocalStorage</h2>
            <div id="storageInfo"></div>
            <button onclick="updateStorageInfo()" class="success">ğŸ”„ Cáº­p nháº­t</button>
        </div>
        
        <div class="section">
            <h2>ğŸ§ª Táº¡o dá»¯ liá»‡u test</h2>
            <p>Nháº¥n nÃºt Ä‘á»ƒ táº¡o dá»¯ liá»‡u test (Ä‘á»ƒ kiá»ƒm tra há»‡ thá»‘ng):</p>
            <button onclick="simulateCompleteLesson()">âœ… HoÃ n thÃ nh táº¥t cáº£ bÃ i há»c (100%)</button>
            <button onclick="simulateCompleteTests()">âœ… HoÃ n thÃ nh táº¥t cáº£ bÃ i test</button>
            <button onclick="simulatePartialCompletion()">â³ HoÃ n thÃ nh riÃªng láº»</button>
        </div>
        
        <div class="section">
            <h2>ğŸ—‘ï¸ XÃ³a dá»¯ liá»‡u</h2>
            <button onclick="clearSpecificKey()" class="danger">ğŸ—‘ï¸ XÃ³a test riÃªng láº»</button>
            <button onclick="clearAllStorage()" class="danger">ğŸ—‘ï¸ XÃ³a táº¥t cáº£ dá»¯ liá»‡u</button>
            <button onclick="clearLearnData()" class="danger">ğŸ—‘ï¸ XÃ³a dá»¯ liá»‡u há»c</button>
            <button onclick="clearTestData()" class="danger">ğŸ—‘ï¸ XÃ³a dá»¯ liá»‡u test</button>
        </div>
        
        <div class="section">
            <h2>ğŸ” Kiá»ƒm tra truy cáº­p Test</h2>
            <button onclick="checkTestAccess('body')">Check Body Test</button>
            <button onclick="checkTestAccess('professional')">Check Professional Test</button>
            <button onclick="checkTestAccess('learning')">Check Learning Test</button>
            <button onclick="checkTestAccess('sport')">Check Sport Test</button>
            <button onclick="checkTestAccess('computer')">Check Computer Test</button>
            <div id="accessOutput" class="output" style="display:none;"></div>
        </div>
        
        <div class="section">
            <h2>âš¡ HÃ nh Ä‘á»™ng nhanh</h2>
            <button onclick="openProgressPage()">ğŸ“Š Má»Ÿ trang Tiáº¿n Ä‘á»™</button>
            <button onclick="openHomePage()">ğŸ  Má»Ÿ trang chá»§</button>
            <button onclick="reloadPage()">ğŸ”„ Reload trang nÃ y</button>
        </div>
        
        <a href="index.html" class="back-btn">â† Quay láº¡i trang chá»§</a>
    </div>
    
    <script>
        function updateStorageInfo() {
            const info = document.getElementById('storageInfo');
            const table = document.createElement('table');
            
            table.innerHTML = `
                <tr>
                    <th>Key</th>
                    <th>Value</th>
                </tr>
            `;
            
            const keys = Object.keys(localStorage);
            keys.forEach(key => {
                const row = table.insertRow();
                const keyCell = row.insertCell(0);
                const valueCell = row.insertCell(1);
                keyCell.className = 'status-key';
                valueCell.className = 'status-value';
                keyCell.textContent = key;
                valueCell.textContent = localStorage.getItem(key);
            });
            
            if (keys.length === 0) {
                table.innerHTML += `<tr><td colspan="2" style="text-align:center;color:#999;">LocalStorage trá»‘ng</td></tr>`;
            }
            
            info.innerHTML = '';
            info.appendChild(table);
        }
        
        function simulateCompleteLesson() {
            const sections = ['body', 'professional', 'learning', 'sport', 'computer'];
            sections.forEach(section => {
                localStorage.setItem(`completed-${section}`, new Date().toISOString());
            });
            alert('âœ… ÄÃ£ táº¡o dá»¯ liá»‡u: HoÃ n thÃ nh táº¥t cáº£ bÃ i há»c (100%)');
            updateStorageInfo();
        }
        
        function simulateCompleteTests() {
            const sections = ['body', 'professional', 'learning', 'sport', 'computer'];
            sections.forEach(section => {
                localStorage.setItem(`test-completed-${section}`, new Date().toISOString());
                localStorage.setItem(`test-score-${section}`, 100);
            });
            alert('âœ… ÄÃ£ táº¡o dá»¯ liá»‡u: HoÃ n thÃ nh táº¥t cáº£ bÃ i test (100%)');
            updateStorageInfo();
        }
        
        function simulatePartialCompletion() {
            // HoÃ n thÃ nh bÃ i há»c 1, 2 vÃ  test 1
            localStorage.setItem('completed-body', new Date().toISOString());
            localStorage.setItem('completed-professional', new Date().toISOString());
            localStorage.setItem('test-completed-body', new Date().toISOString());
            localStorage.setItem('test-score-body', 95);
            alert('âœ… ÄÃ£ táº¡o dá»¯ liá»‡u: HoÃ n thÃ nh Body & Professional learn + Body test');
            updateStorageInfo();
        }
        
        function clearSpecificKey() {
            const key = prompt('Nháº­p key muá»‘n xÃ³a (VD: completed-body):');
            if (key && localStorage.getItem(key)) {
                localStorage.removeItem(key);
                alert(`âœ… ÄÃ£ xÃ³a: ${key}`);
                updateStorageInfo();
            } else if (key) {
                alert('âŒ Key khÃ´ng tá»“n táº¡i');
            }
        }
        
        function clearAllStorage() {
            if (confirm('âš ï¸ Báº¡n cháº¯c cháº¯n muá»‘n xÃ³a Táº¤T Cáº¢ dá»¯ liá»‡u?')) {
                localStorage.clear();
                alert('âœ… ÄÃ£ xÃ³a táº¥t cáº£ dá»¯ liá»‡u');
                updateStorageInfo();
            }
        }
        
        function clearLearnData() {
            const sections = ['body', 'professional', 'learning', 'sport', 'computer'];
            sections.forEach(section => {
                localStorage.removeItem(`completed-${section}`);
            });
            alert('âœ… ÄÃ£ xÃ³a dá»¯ liá»‡u há»c');
            updateStorageInfo();
        }
        
        function clearTestData() {
            const sections = ['body', 'professional', 'learning', 'sport', 'computer'];
            sections.forEach(section => {
                localStorage.removeItem(`test-completed-${section}`);
                localStorage.removeItem(`test-score-${section}`);
            });
            alert('âœ… ÄÃ£ xÃ³a dá»¯ liá»‡u test');
            updateStorageInfo();
        }
        
        function checkTestAccess(section) {
            const output = document.getElementById('accessOutput');
            output.style.display = 'block';
            
            const testOrder = ['body', 'professional', 'learning', 'sport', 'computer'];
            const currentIndex = testOrder.indexOf(section);
            
            let result = `ğŸ” Kiá»ƒm tra truy cáº­p: ${section}\n`;
            result += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
            result += `Thá»© tá»±: Test ${currentIndex + 1}\n`;
            
            if (currentIndex === 0) {
                result += `\nâœ… Test Ä‘áº§u tiÃªn luÃ´n Ä‘Æ°á»£c phÃ©p\n`;
                result += `CÃ³ thá»ƒ vÃ o: CÃ“ âœ“\n`;
            } else {
                const previousSection = testOrder[currentIndex - 1];
                const previousCompleted = localStorage.getItem(`test-completed-${previousSection}`);
                
                result += `\nTest trÆ°á»›c: ${previousSection} (Test ${currentIndex})\n`;
                result += `Tráº¡ng thÃ¡i: ${previousCompleted ? 'âœ… HoÃ n thÃ nh' : 'âŒ ChÆ°a hoÃ n thÃ nh'}\n`;
                result += `CÃ³ thá»ƒ vÃ o: ${previousCompleted ? 'CÃ“ âœ“' : 'KHÃ”NG âœ—'}\n`;
            }
            
            output.textContent = result;
        }
        
        function openProgressPage() {
            window.location.href = 'progress-status.html';
        }
        
        function openHomePage() {
            window.location.href = 'index.html';
        }
        
        function reloadPage() {
            window.location.reload();
        }
        
        // Cáº­p nháº­t thÃ´ng tin khi táº£i trang
        window.addEventListener('DOMContentLoaded', updateStorageInfo);
    </script>
</body>
</html>
