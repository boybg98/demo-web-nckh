<!DOCTYPE html>
<html>
<head>
    <title>Check Learning</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./css/fonttest.css">
    <script src="./js/main.js" defer></script>
</head>
<body>
    <h1>Check test Learning</h1>
    <input type="hidden" id="h_val" value="0">
    <input type="hidden" id="m_val" value="3">
    <input type="hidden" id="s_val" value="0">
    <div>
        Th·ªùi gian c√≤n l·∫°i: 
        <span id="h">0</span>:
        <span id="m">03</span>:
        <span id="s">00</span>
    </div>
    
    <form id="test-form">
        <fieldset>
            <legend>Experience</legend>
            <h2>Choose the correct option</h2>
            <ol>
                <li>
                   <p class="questions"> study c√≥ nghƒ©a l√† ?</p> 
                    <label><input name="answer1" type="radio" value="A">h·ªçc</label>
                    <label><input name="answer1" type="radio" value="B">b√¨nh lu·∫≠n ch√∫ th√≠ch</label>
                    <label><input name="answer1" type="radio" value="C">ƒë√†o t·∫°o</label>
                    <label><input name="answer1" type="radio" value="D">ghi ch√©p</label>
                </li>
                <br>
                <li>
                  <p class="questions">  comment c√≥ nghƒ©a l√† g√¨ ?</p>
                    <label><input name="answer2" type="radio" value="A">h·ªçc</label>
                    <label><input name="answer2" type="radio" value="B">b√¨nh lu·∫≠n ch√∫ th√≠ch</label>
                    <label><input name="answer2" type="radio" value="C">ƒë·ªçc</label>
                    <label><input name="answer2" type="radio" value="D">ƒë√†o t·∫°o</label>
                </li>
                <br>
                <li>
                    <p class="questions">train c√≥ nghƒ©a l√† g√¨ ?</p>
                    <label><input name="answer3" type="radio" value="A">b√¨nh lu·∫≠n ch√∫ th√≠ch</label>
                    <label><input name="answer3" type="radio" value="B">ƒë√†o t·∫°o</label>
                    <label><input name="answer3" type="radio" value="C">ƒë·ªçc</label>
                    <label><input name="answer3" type="radio" value="D">ghi nh·ªõ</label>
                </li>
                <br>
                <li>
                    <p class="questions"> copy c√≥ nghƒ©a l√† g√¨ ?</p> 
                    <label><input name="answer4" type="radio" value="A">ƒë√†o t·∫°o</label>
                    <label><input name="answer4" type="radio" value="B">h·ªçc</label>
                    <label><input name="answer4" type="radio" value="C">ghi ch√©p</label>
                    <label><input name="answer4" type="radio" value="D">ƒë·ªçc</label>
                </li>
                <br>
                <li>
                    <p>read c√≥ nghƒ©a l√† g√¨?</p> 
                    <label><input name="answer5" type="radio" value="A">ƒë·ªçc</label>
                    <label><input name="answer5" type="radio" value="B">b√¨nh lu·∫≠n ch√∫ th√≠ch</label>
                    <label><input name="answer5" type="radio" value="C">h·ªçc</label>
                    <label><input name="answer5" type="radio" value="D">ghi ch√©p</label>
                </li>
            </ol>
        </fieldset>
        <fieldset>
            <legend>FILL</legend>
            <h2>Fill in the blank </h2>
            <ol>
                <li>study:<input name="q1" placeholder="keys" type="text"></li>
                <li>comment:<input name="q2" placeholder="keys" type="text"></li>
                <li>train:<input name="q3" placeholder="keys" type="text"></li>
                <li>copy:<input name="q4" placeholder="keys" type="text"></li>
                <li>read:<input name="q5" placeholder="keys" type="text"></li>
            </ol>
        </fieldset>
        <button type="submit" id="btn-submit" style="margin-top: 20px;">N·ªôp b√†i</button>
    </form>

    <div id="result-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 style="color: #333;">üéâ K·∫øt qu·∫£ c·ªßa b·∫°n</h2>
            <p id="score-text" style="font-size: 18px; margin: 20px 0;">B·∫°n ƒë√£ ƒë·∫°t ... ƒëi·ªÉm.</p>
            <p>B·∫°n c√≥ mu·ªën n√¢ng c·∫•p l√™n tr√¨nh ƒë·ªô: Kh√°?</p>
            <button id="btn-upgrade" class="btn-next">N√¢ng c·∫•p tr√¨nh ƒë·ªô</button>
        </div>
    </div>

    <style>
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: white; padding: 30px; border-radius: 15px; text-align: center; width: 400px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); animation: popIn 0.3s ease; }
        .btn-next { background: #4CAF50; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; font-weight: bold; margin-top: 10px; }
        .btn-next:hover { background: #45a049; }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .correct { color: green; font-weight: bold; }
        .incorrect { color: red; text-decoration: line-through; }
    </style>

    <script>
        document.getElementById('test-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const answers = {
                answer1: "A", // h·ªçc
                answer2: "B", // b√¨nh lu·∫≠n
                answer3: "B", // ƒë√†o t·∫°o
                answer4: "C", // ghi ch√©p
                answer5: "A", // ƒë·ªçc
                q1: "h·ªçc",
                q2: "b√¨nh lu·∫≠n ch√∫ th√≠ch",
                q3: "ƒë√†o t·∫°o",
                q4: "ghi ch√©p",
                q5: "ƒë·ªçc"
            };

            let score = 0;
            const totalQuestions = 10;

            for (let i = 1; i <= 5; i++) {
                const radios = document.getElementsByName(`answer${i}`);
                radios.forEach(radio => {
                    if (radio.checked) {
                        if (radio.value === answers[`answer${i}`]) {
                            score++;
                            radio.parentElement.style.color = "green";
                        } else {
                            radio.parentElement.style.color = "red";
                        }
                    }
                });
            }

            for (let i = 1; i <= 5; i++) {
                const input = document.getElementsByName(`q${i}`)[0];
                const val = input.value.trim().toLowerCase();
                // Ch·∫•p nh·∫≠n "b√¨nh lu·∫≠n" cho c√¢u 2
                if (val === answers[`q${i}`] || (i===2 && val === "b√¨nh lu·∫≠n")) {
                    score++;
                    input.style.border = "2px solid green";
                    input.style.color = "green";
                } else {
                    input.style.border = "2px solid red";
                    input.style.color = "red";
                }
            }

            // === PH·∫¶N QUAN TR·ªåNG: L∆ØU ƒêI·ªÇM V√ÄO B·ªò NH·ªö ===
            const percentage = (score / totalQuestions) * 100;
            localStorage.setItem('test-completed-learning', 'true'); // Key cho Test 3
            localStorage.setItem('test-score-learning', percentage); // Key cho Test 3
            // ============================================

            const modal = document.getElementById('result-modal');
            document.getElementById('score-text').innerHTML = `B·∫°n ƒë√£ ƒë·∫°t <strong>${score}/${totalQuestions}</strong> ƒëi·ªÉm.`;
            modal.style.display = 'flex';
        });

        document.getElementById('btn-upgrade').addEventListener('click', function() {
            window.location.href = 'testkha.html';
        });
    </script>
</body>
</html>